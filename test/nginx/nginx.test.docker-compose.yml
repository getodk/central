services:
  enketo:
    build:
      dockerfile: mock-http-service.dockerfile
    ports:
      - "8005:8005"
    environment:
      - PORT=8005
  service:
    build:
      dockerfile: mock-http-service.dockerfile
    ports:
      - "8383:8383"
    environment:
      - PORT=8383
  sentry-mock:
    build:
      dockerfile: mock-sentry.dockerfile
    ports:
      # Sentry port is not currently configurable in nginx config, so use default HTTPS port
      - "443:443"
    environment:
      - MODE=https
      - HTTPS_HOST=o-fake-dsn.ingest.sentry.io
      - PORT=443
  nginx-ssl-selfsign:
    extends:
      file: lib.docker-compose.yml
      service: nginx
    environment:
      - SSL_TYPE=selfsign
    ports:
      - "9000:80"
      - "9001:443"
  nginx-ssl-upstream:
    extends:
      file: lib.docker-compose.yml
      service: nginx
    environment:
      - SSL_TYPE=upstream
    ports:
      - "10000:80"
      - "10001:443"
